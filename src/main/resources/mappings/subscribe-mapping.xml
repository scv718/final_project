<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="SubscribeDAO">

	<!-- 구독-1 -->
	<insert id="insertSubscribe1">
		INSERT INTO SUBSCRIPT
		VALUES(#{id}, 1 , NOW(), '입금완료',
		0 ,
		DATE_ADD(NOW(), INTERVAL 30 DAY),1,0,0,0,0)
	</insert>
	


	<!-- 구독-2 -->
	<insert id="insertSubscribe2">
		INSERT INTO SUBSCRIPT
		VALUES(#{id}, 2 , NOW(), '입금완료',
		0 ,
		DATE_ADD(NOW(), INTERVAL 30 DAY),1,0,0,0,0)
	</insert>

	<!-- 구독-3 -->
	<insert id="insertSubscribe3">
		INSERT INTO SUBSCRIPT
		VALUES(#{id}, 3 , NOW(), '입금완료',
		0 ,
		DATE_ADD(NOW(), INTERVAL 30 DAY),1,0,0,0,0)
	</insert>

<!--구독 취소-->
	<update id="updateSubscribe">
		UPDATE SUBSCRIPT SET LEVEL = 0,
		SUB_DATE = 0,
		E_DATE = NOW() ,
		 SUB_STATUS = 2
		WHERE ID = #{id};
	</update>
	
</mapper>
