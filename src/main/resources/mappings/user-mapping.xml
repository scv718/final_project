<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="UserDAO">

	<select id="getUser" resultType="users">
		select * from member 
		where id = #{id} and M_PW = #{m_pw}
	</select>
	
	<select id="checkUser" resultType="int">
		select count(*) from member
		where id = #{id}
	</select>
	
	<insert id="insertUser">
		INSERT INTO member (ID, M_PW, M_NAME, M_PHONE, M_BIRTH, M_EMAIL)
		VALUES (#{id}, #{m_pw}, #{m_name}, #{m_phone}, #{m_birth}, #{m_email})
	</insert>
	
	<insert id="insertKakaoUser">
		INSERT INTO member (ID, M_PW, M_NAME, M_EMAIL)
		VALUES (#{id}, #{m_pw}, #{m_name}, #{m_email})
	</insert>
	
	<select id="getId" resultType="users">
		select id from member
		where M_EMAIL = #{m_email}
	</select>
<<<<<<< HEAD
	<select id="getUser1" resultType="int">
		SELECT LEVEL FROM MEMBER
		WHERE ID = #{id}
	</select>

=======
	
>>>>>>> 5b84cecc84f7afafe3964434506bf33a5924173d
	<select id="getPw" resultType="int">
		select count(*) from member
		where M_PHONE = #{m_phone}
	</select>
	
	<update id="changePw">
		UPDATE MEMBER
		SET M_PW = #{m_pw}
		WHERE M_PHONE = #{m_phone}
	</update>
	
<!-- 구독 -->
<select id="getUser1" resultType="_int">
 <![CDATA[SELECT LEVEL FROM MEMBER WHERE LEVEL = 0 < #{LEVEL} AND ID= #{id}]]>
	</select>
	
	<update id="updateuserle0">
		UPDATE MEMBER SET LEVEL = 0
		WHERE ID = #{id}
	</update><update id="updateuserle1">
		UPDATE MEMBER SET LEVEL = 1
		WHERE ID = #{id}
	</update><update id="updateuserle2">
		UPDATE MEMBER SET LEVEL = 2
		WHERE ID = #{id}
	</update><update id="updateuserle3">
		UPDATE MEMBER SET LEVEL = 3
		WHERE ID = #{id}
	</update>
</mapper>
